{"version":3,"sources":["webpack:///./src/views/Login/index.vue?93ad","webpack:///./src/views/Login/index.vue?0883","webpack:///./src/api/user.js","webpack:///src/views/Login/index.vue","webpack:///./src/views/Login/index.vue?2a1e","webpack:///./src/views/Login/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_b","ref","attrs","loginForm","rules","layout","model","value","callback","$$v","$set","expression","_v","span","offset","on","$event","submitForm","staticStyle","resetForm","staticRenderFns","postLogin","userInfo","request","post","data","emailReg","test","Error","password","email","labelCol","wrapperCol","methods","$refs","formName","validate","valid","console","log","resetFields","component"],"mappings":"8HAAA,W,yCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,eAAeJ,EAAIO,GAAG,CAACC,IAAI,YAAYF,YAAY,aAAaG,MAAM,CAAC,MAAQT,EAAIU,UAAU,MAAQV,EAAIW,QAAQ,eAAeX,EAAIY,QAAO,GAAO,CAACR,EAAG,oBAAoB,CAACK,MAAM,CAAC,eAAe,GAAG,MAAQ,KAAK,KAAO,UAAU,CAACL,EAAG,UAAU,CAACS,MAAM,CAACC,MAAOd,EAAIU,UAAe,MAAEK,SAAS,SAAUC,GAAMhB,EAAIiB,KAAKjB,EAAIU,UAAW,QAASM,IAAME,WAAW,qBAAqBlB,EAAImB,GAAG,yBAAyB,GAAGf,EAAG,oBAAoB,CAACK,MAAM,CAAC,eAAe,GAAG,MAAQ,KAAK,KAAO,aAAa,CAACL,EAAG,UAAU,CAACK,MAAM,CAAC,KAAO,WAAW,aAAe,OAAOI,MAAM,CAACC,MAAOd,EAAIU,UAAkB,SAAEK,SAAS,SAAUC,GAAMhB,EAAIiB,KAAKjB,EAAIU,UAAW,WAAYM,IAAME,WAAW,wBAAwBlB,EAAImB,GAAG,uBAAuB,GAAGf,EAAG,oBAAoB,CAACK,MAAM,CAAC,cAAc,CAAEW,KAAM,GAAIC,OAAQ,KAAM,CAACjB,EAAG,WAAW,CAACK,MAAM,CAAC,KAAO,WAAWa,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOvB,EAAIwB,WAAW,gBAAgB,CAACxB,EAAImB,GAAG,UAAUf,EAAG,WAAW,CAACqB,YAAY,CAAC,cAAc,QAAQH,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOvB,EAAI0B,UAAU,gBAAgB,CAAC1B,EAAImB,GAAG,WAAW,IAAI,IAAI,IACjrCQ,EAAkB,G,oCCCf,SAAeC,EAAtB,kC,8DAAO,WAAyBC,GAAzB,iGACQC,OAAQC,KAAK,kBAAmBF,GADxC,mF,wBCmCP,OACEG,KADF,WAEI,IAAJ,0JAEA,kBACM,OAAKlB,EAGDmB,EAASC,KAAKpB,GACTC,IAEAA,EAAS,IAAIoB,MAAM,YALnBpB,EAAS,IAAIoB,MAAM,WAQlC,kBACoB,KAAVrB,EACFC,EAAS,IAAIoB,MAAM,UAKnBpB,KAIJ,MAAO,CACLL,UAAW,CACT0B,SAAU,GACVC,MAAO,IAGT1B,MAAO,CACLyB,SAAU,CAAC,CAAnB,+BACQC,MAAO,CAAC,CAAhB,gCAEMzB,OAAQ,CACN0B,SAAU,CAAlB,QACQC,WAAY,CAApB,YAIEC,QAAS,CACPhB,WADJ,SACA,cACMvB,KAAKwC,MAAMC,GAAUC,UAAS,SAApC,GACQ,IAAIC,EAeF,OADAC,QAAQC,IAAI,mBACL,EAdPlB,EAAU,EAApB,WACA,kBAGY,EAAZ,uCAEY,EAAZ,cAAc,KAAd,YAEA,mBACY,QAAZ,OACY,EAAZ,yBAQIF,UAtBJ,SAsBA,GACMzB,KAAKwC,MAAMC,GAAUK,iBCrGmU,I,wBCQ1VC,EAAY,eACd,EACAjD,EACA4B,GACA,EACA,KACA,WACA,MAIa,aAAAqB,E","file":"js/login.b38885fd.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=fd8e8ebe&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-container\"},[_c('a-form-model',_vm._b({ref:\"loginForm\",staticClass:\"login-from\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.rules}},'a-form-model',_vm.layout,false),[_c('a-form-model-item',{attrs:{\"has-feedback\":\"\",\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('a-input',{model:{value:(_vm.loginForm.email),callback:function ($$v) {_vm.$set(_vm.loginForm, \"email\", $$v)},expression:\"loginForm.email\"}}),_vm._v(\"参考：136975643@qq.com \")],1),_c('a-form-model-item',{attrs:{\"has-feedback\":\"\",\"label\":\"密码\",\"prop\":\"password\"}},[_c('a-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}}),_vm._v(\"参考：mryx_136975643 \")],1),_c('a-form-model-item',{attrs:{\"wrapper-col\":{ span: 14, offset: 4 }}},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('loginForm')}}},[_vm._v(\" 提交 \")]),_c('a-button',{staticStyle:{\"margin-left\":\"10px\"},on:{\"click\":function($event){return _vm.resetForm('loginForm')}}},[_vm._v(\" 重置 \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from \"./request\";\r\n\r\nexport async function postLogin(userInfo) {\r\n  return await request.post(\"/passport/login\", userInfo);\r\n}\r\n","<template>\r\n  <div class=\"login-container\">\r\n    <a-form-model class=\"login-from\"\r\n                  ref=\"loginForm\"\r\n                  :model=\"loginForm\"\r\n                  :rules=\"rules\"\r\n                  v-bind=\"layout\">\r\n      <a-form-model-item has-feedback\r\n                         label=\"邮箱\"\r\n                         prop=\"email\">\r\n        <a-input v-model=\"loginForm.email\" />参考：136975643@qq.com\r\n      </a-form-model-item>\r\n\r\n      <a-form-model-item has-feedback\r\n                         label=\"密码\"\r\n                         prop=\"password\">\r\n        <a-input v-model=\"loginForm.password\"\r\n                 type=\"password\"\r\n                 autocomplete=\"off\" />参考：mryx_136975643\r\n      </a-form-model-item>\r\n      <a-form-model-item :wrapper-col=\"{ span: 14, offset: 4 }\">\r\n        <a-button type=\"primary\"\r\n                  @click=\"submitForm('loginForm')\">\r\n          提交\r\n        </a-button>\r\n        <a-button style=\"margin-left: 10px\"\r\n                  @click=\"resetForm('loginForm')\">\r\n          重置\r\n        </a-button>\r\n      </a-form-model-item>\r\n    </a-form-model>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { postLogin } from '@/api/user';\r\n\r\nexport default {\r\n  data() {\r\n    let emailReg = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    // let emailReg = /^[\\w-]+@[\\w.-]+.com$/;\r\n    let checkEmail = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error('请输入邮箱'));\r\n      }\r\n      if (emailReg.test(value)) {\r\n        return callback();\r\n      } else {\r\n        return callback(new Error('邮箱格式不正确'));\r\n      }\r\n    };\r\n    let validatePass = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('请输入密码'));\r\n      } else {\r\n        // if (this.loginForm.checkPass !== '') {\r\n        //   this.$refs.loginForm.validateField('checkPass');\r\n        // }\r\n        callback();\r\n      }\r\n    };\r\n\r\n    return {\r\n      loginForm: {\r\n        password: '',\r\n        email: '',\r\n        // checkPass: '',\r\n      },\r\n      rules: {\r\n        password: [{ validator: validatePass, trigger: 'change' }],\r\n        email: [{ validator: checkEmail, trigger: 'change' }],\r\n      },\r\n      layout: {\r\n        labelCol: { span: 4 },\r\n        wrapperCol: { span: 14 },\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          postLogin(this.loginForm)\r\n            .then((r) => {\r\n              // console.log('成功', r);\r\n              // 登录成功 设置用户信息\r\n              this.$store.dispatch('login/setUserInfo', r);\r\n              // 登录成功跳转到首页\r\n              this.$router.push({ name: 'Home' });\r\n            })\r\n            .catch((err) => {\r\n              console.log(err);\r\n              this.$message.error(err);\r\n            });\r\n        } else {\r\n          console.log('error submit!!');\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.login-container {\r\n  max-width: 500px;\r\n  margin: 100px auto;\r\n\r\n  .login-from {\r\n    padding-top: 30px;\r\n    border: 1px solid #eee;\r\n    text-align: center;\r\n\r\n    div:not(:last-child) {\r\n      padding-left: calc((100% - 340px) / 2);\r\n    }\r\n    div:last-child {\r\n      padding-left: calc((100% - 16.66666667% - 290px) / 2);\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=fd8e8ebe&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=fd8e8ebe&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fd8e8ebe\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}