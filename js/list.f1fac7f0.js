(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["list"],{"22a1":function(t,e,n){},5175:function(t,e,n){"use strict";n("762f")},"5e56":function(t,e,n){"use strict";n("22a1")},"762f":function(t,e,n){},"93f7":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"product-list-container"},[n("Search",{attrs:{categoryList:t.categoryList},on:{submit:t.handleSubmit}}),n("a-button",{staticClass:"add-btn"},[n("RouterLink",{attrs:{to:{name:"ProductAdd"}}},[t._v("新增商品")])],1),n("TableProduct",{attrs:{categoryList:t.categoryList,data:t.keyData,pagination:t.page},on:{del:t.delProduct,edit:t.editProduct,changePage:t.changePage}})],1)},r=[],c=n("5530"),i=n("1da1"),o=(n("96cf"),n("159b"),n("d81d"),n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-form-model",{staticClass:"search-container",attrs:{layout:"inline",model:t.searchFrom},on:{submit:t.handleSubmit},nativeOn:{submit:function(t){t.preventDefault()}}},[n("a-form-model-item",{attrs:{label:"检索关键字"}},[n("a-input",{attrs:{placeholder:"请输入关键字"},model:{value:t.searchFrom.searchWord,callback:function(e){t.$set(t.searchFrom,"searchWord",e)},expression:"searchFrom.searchWord"}})],1),n("a-form-model-item",{attrs:{label:"商品类目"}},[n("a-select",{staticStyle:{width:"200px"},attrs:{allowClear:"","show-search":"",placeholder:"请选择商品类目","option-filter-prop":"children"},on:{change:t.handleChange}},t._l(t.categoryList,(function(e){return n("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),n("a-form-model-item",[n("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 搜索 ")])],1)],1)}),u=[],s={props:["categoryList"],data:function(){return{searchFrom:{searchWord:"",category:""}}},created:function(){},methods:{handleSubmit:function(){this.$emit("submit",this.searchFrom)},handleChange:function(t){this.searchFrom.category=t}}},l=s,d=n("2877"),p=Object(d["a"])(l,o,u,!1,null,null,null),f=p.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-table",{staticClass:"table-product-container",attrs:{pagination:t.pagination,columns:t.columns,"data-source":t.data},on:{change:t.changePage},scopedSlots:t._u([{key:"operation",fn:function(e,a){return n("div",{},[n("a-button",{staticClass:"editBtn",attrs:{type:"primary"},on:{click:function(e){return t.editProduct(a)}}},[t._v(" 编辑 ")]),n("a-button",{attrs:{type:"danger"},on:{click:function(e){return t.removeProduct(a)}}},[t._v(" 删除 ")])],1)}}])})},m=[],g=[{title:"ID",dataIndex:"id",key:"id"},{title:"标题",dataIndex:"title",key:"title",ellipsis:!0},{title:"描述",dataIndex:"desc",key:"desc",ellipsis:!0},{title:"类目",dataIndex:"categoryName",key:"category",ellipsis:!0},{title:"预售价格",dataIndex:"price",key:"price",ellipsis:!0},{title:"折扣价格",dataIndex:"price_off",key:"price_off"},{title:"标签",dataIndex:"tags",key:"tags",width:140},{title:"限制购买数量",dataIndex:"inventory",key:"inventory",ellipsis:!0},{title:"上架状态",dataIndex:"status",key:"status",customRender:function(t,e){return 1===e.status?"上架":"下架"}},{title:"操作",dataIndex:"operation",key:"operation",width:164,scopedSlots:{customRender:"operation"}}],b={props:["data","pagination"],data:function(){return{columns:g}},methods:{changePage:function(t){this.$emit("changePage",t)},editProduct:function(t){this.$emit("edit",t)},removeProduct:function(t){this.$emit("del",t)}}},y=b,v=(n("5175"),Object(d["a"])(y,h,m,!1,null,"3a3d5d63",null)),w=v.exports,k=n("c4c8"),x=n("c405"),O={components:{Search:f,TableProduct:w},data:function(){return{formData:{},tableData:[],categoryList:[],categoryObj:{},page:{current:1,pageSize:10,showSizeChanger:!0,total:1}}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(x["a"])().then((function(e){t.categoryList=e.data,e.data.forEach((function(e){t.categoryObj[e.id]=e}))}));case 2:t.getTableData();case 3:case"end":return e.stop()}}),e)})))()},computed:{keyData:function(){return this.tableData.map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{key:t.id})}))}},methods:{handleSubmit:function(t){this.formData=t,this.page.current=1,this.getTableData()},getTableData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c["a"])({page:this.page.current,size:this.page.pageSize},this.formData);Object(k["e"])(e).then((function(e){t.page.total=e.total,t.tableData=e.data.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{categoryName:t.categoryObj[e.category]?t.categoryObj[e.category].name:""})}))}))},changePage:function(t){this.page=t,this.getTableData()},editProduct:function(t){console.log(t),this.$router.push({name:"ProductEdit",params:{id:t.id}})},delProduct:function(t){var e=this,n=this.$createElement;this.$confirm({title:"确认删除产品?",content:function(){return n("div",{style:"color:red;"},["".concat(t.title)])},okText:"确认",okType:"danger",cancelText:"取消",onOk:function(){Object(k["a"])({id:t.id}).then((function(t){console.log(e),e.getTableData()})),console.log("OK")},onCancel:function(){console.log("Cancel")}})}}},j=O,P=(n("5e56"),Object(d["a"])(j,a,r,!1,null,"28f4015c",null));e["default"]=P.exports},c405:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n("1da1"),r=(n("96cf"),n("0c6d"));function c(t){return i.apply(this,arguments)}function i(){return i=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].get("/category/all",{params:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),i.apply(this,arguments)}},c4c8:function(t,e,n){"use strict";n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return f}));var a=n("1da1"),r=(n("96cf"),n("0c6d"));function c(t){return i.apply(this,arguments)}function i(){return i=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].get("/products/all",{params:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),i.apply(this,arguments)}function o(t){return u.apply(this,arguments)}function u(){return u=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].delete("/products/".concat(e.id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function s(t){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].post("/products/add",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function d(t){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].get("/products/".concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function f(t){return h.apply(this,arguments)}function h(){return h=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].put("/products/edit",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}}}]);
//# sourceMappingURL=list.f1fac7f0.js.map