{"version":3,"sources":["webpack:///./src/views/ProductAdd/index.vue?0ee9","webpack:///./src/components/BasicInfo/index.vue?8213","webpack:///src/components/BasicInfo/index.vue","webpack:///./src/components/BasicInfo/index.vue?8e25","webpack:///./src/components/BasicInfo/index.vue","webpack:///./src/components/SaleInfo/index.vue?7ac8","webpack:///src/components/SaleInfo/index.vue","webpack:///./src/components/SaleInfo/index.vue?79ce","webpack:///./src/components/SaleInfo/index.vue","webpack:///src/views/ProductAdd/index.vue","webpack:///./src/views/ProductAdd/index.vue?78e0","webpack:///./src/views/ProductAdd/index.vue","webpack:///./src/components/BasicInfo/index.vue?0bfa","webpack:///./src/views/ProductAdd/index.vue?ddc1","webpack:///./src/api/category.js","webpack:///./src/api/product.js","webpack:///./src/components/SaleInfo/index.vue?121d"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","current","_l","item","key","title","ref","tempForm","_e","steps","length","on","next","_v","staticStyle","prev","done","staticRenderFns","rules","labelCol","wrapperCol","model","value","callback","$$v","$set","expression","changeCategory","c","id","_s","name","size","props","data","categoryList","categoryItems","created","console","log","r","methods","i","category","c_item","component","$store","state","login","user","appkey","fileList","handlePreview","handleChange","previewVisible","handleCancel","previewImage","getBase64","file","Promise","reader","readAsDataURL","onload","onerror","images","map","uid","idx","status","url","onSubmit","$refs","ruleForm","validate","valid","alert","response","res","push","components","BasicInfo","SaleInfo","desc","c_items","tags","price","price_off","inventory","unit","$route","params","$message","success","$router","getCategory","request","get","getProduct","DelProduct","delete","addProduct","post","detailProduct","editProduct","put"],"mappings":"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","file":"js/add.8c3778f1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"product-add-container\"},[_c('a-steps',{attrs:{\"current\":_vm.current}},_vm._l((_vm.steps),function(item){return _c('a-step',{key:item.title,attrs:{\"title\":item.title}})}),1),_c('div',{staticClass:\"steps-content\"},[(_vm.current===0)?_c('BasicInfo',{ref:\"ruleForm\",attrs:{\"tempForm\":_vm.tempForm}}):_vm._e(),(_vm.current===1)?_c('SaleInfo',{attrs:{\"tempForm\":_vm.tempForm}}):_vm._e()],1),_c('div',{staticClass:\"steps-action\"},[(_vm.current < _vm.steps.length - 1)?_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.next}},[_vm._v(\" 下一步 \")]):_vm._e(),(_vm.current > 0)?_c('a-button',{staticClass:\"pre\",staticStyle:{\"margin-left\":\"8px\"},on:{\"click\":_vm.prev}},[_vm._v(\" 返回上一步 \")]):_vm._e(),(_vm.current == _vm.steps.length - 1)?_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.done}},[_vm._v(\" 完成 \")]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"edit-form-container\"},[_c('a-form-model',{ref:\"ruleForm\",attrs:{\"model\":_vm.tempForm,\"rules\":_vm.rules,\"label-col\":_vm.labelCol,\"wrapper-col\":_vm.wrapperCol}},[_c('a-form-model-item',{attrs:{\"label\":\"标题\",\"required\":\"\",\"prop\":\"title\"}},[_c('a-input',{model:{value:(_vm.tempForm.title),callback:function ($$v) {_vm.$set(_vm.tempForm, \"title\", $$v)},expression:\"tempForm.title\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品描述\",\"prop\":\"desc\"}},[_c('a-input',{model:{value:(_vm.tempForm.desc),callback:function ($$v) {_vm.$set(_vm.tempForm, \"desc\", $$v)},expression:\"tempForm.desc\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品类目\",\"required\":\"\",\"prop\":\"category\"}},[_c('a-select',{attrs:{\"placeholder\":\"请选择商品类别\"},on:{\"change\":_vm.changeCategory},model:{value:(_vm.tempForm.category),callback:function ($$v) {_vm.$set(_vm.tempForm, \"category\", $$v)},expression:\"tempForm.category\"}},_vm._l((_vm.categoryList),function(c){return _c('a-select-option',{key:c.id,attrs:{\"value\":c.id}},[_vm._v(\" \"+_vm._s(c.name)+\" \")])}),1),_c('a-select',{attrs:{\"placeholder\":\"请添加子类目\"},model:{value:(_vm.tempForm.c_item),callback:function ($$v) {_vm.$set(_vm.tempForm, \"c_item\", $$v)},expression:\"tempForm.c_item\"}},_vm._l((_vm.categoryItems),function(c){return _c('a-select-option',{key:c,attrs:{\"value\":c}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1)],1),_c('a-form-model-item',{attrs:{\"label\":\"商品标签\",\"prop\":\"tags\",\"required\":\"\"}},[_c('a-select',{attrs:{\"mode\":\"tags\",\"size\":_vm.size,\"placeholder\":\"请选择标签\",\"default-value\":['包邮,最晚次日达' ]},model:{value:(_vm.tempForm.tags),callback:function ($$v) {_vm.$set(_vm.tempForm, \"tags\", $$v)},expression:\"tempForm.tags\"}},[_c('a-select-option',{attrs:{\"value\":\"包邮,最晚次日达\"}},[_vm._v(\" 包邮,最晚次日达 \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"edit-form-container\">\r\n    <a-form-model ref=\"ruleForm\"\r\n                  :model=\"tempForm\"\r\n                  :rules=\"rules\"\r\n                  :label-col=\"labelCol\"\r\n                  :wrapper-col=\"wrapperCol\">\r\n      <a-form-model-item label=\"标题\"\r\n                         required\r\n                         prop=\"title\">\r\n        <a-input v-model=\"tempForm.title\" />\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"商品描述\"\r\n                         prop=\"desc\">\r\n        <a-input v-model=\"tempForm.desc\" />\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"商品类目\"\r\n                         required\r\n                         prop=\"category\">\r\n        <a-select v-model=\"tempForm.category\"\r\n                  @change=\"changeCategory\"\r\n                  placeholder=\"请选择商品类别\">\r\n          <a-select-option v-for=\"c in categoryList\"\r\n                           :key=\"c.id\"\r\n                           :value=\"c.id\">\r\n            {{c.name}}\r\n          </a-select-option>\r\n        </a-select>\r\n        <a-select v-model=\"tempForm.c_item\"\r\n                  placeholder=\"请添加子类目\">\r\n          <a-select-option v-for=\"c in categoryItems\"\r\n                           :key=\"c\"\r\n                           :value=\"c\">\r\n            {{c}}\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"商品标签\"\r\n                         prop=\"tags\"\r\n                         required>\r\n        <a-select mode=\"tags\"\r\n                  v-model=\"tempForm.tags\"\r\n                  :size=\"size\"\r\n                  placeholder=\"请选择标签\"\r\n                  :default-value=\"['包邮,最晚次日达', ]\">\r\n          <a-select-option value=\"包邮,最晚次日达\">\r\n            包邮,最晚次日达\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-form-model-item>\r\n\r\n    </a-form-model>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCategory } from '@/api/category';\r\n\r\nexport default {\r\n  props: ['tempForm'],\r\n  data() {\r\n    return {\r\n      labelCol: { span: 4 },\r\n      wrapperCol: { span: 14 },\r\n      // form: {},\r\n      categoryList: [], // 商品类目列表\r\n      categoryItems: [], // 商品子类目列表\r\n      size: 'default',\r\n      rules: {},\r\n    };\r\n  },\r\n  created() {\r\n    getCategory().then((r) => {\r\n      console.log(r);\r\n      this.categoryList = r.data;\r\n    });\r\n  },\r\n  methods: {\r\n    changeCategory(category) {\r\n      for (let i = 0; i < this.categoryList.length; i++) {\r\n        if (this.categoryList[i].id === category) {\r\n          this.categoryItems = this.categoryList[i].c_item;\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"less\" scoped>\r\n.ant-form {\r\n  margin-left: 10%;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2e02f6a0&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2e02f6a0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2e02f6a0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sale-info-container\"},[_c('a-form-model',{ref:\"ruleForm\",attrs:{\"model\":_vm.tempForm,\"rules\":_vm.rules,\"label-col\":_vm.labelCol,\"wrapper-col\":_vm.wrapperCol}},[_c('a-form-model-item',{attrs:{\"label\":\"商品售价\",\"required\":\"\",\"prop\":\"price\"}},[_c('a-input',{model:{value:(_vm.tempForm.price),callback:function ($$v) {_vm.$set(_vm.tempForm, \"price\", $$v)},expression:\"tempForm.price\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"折扣价格\",\"prop\":\"price_off\"}},[_c('a-input',{model:{value:(_vm.tempForm.price_off),callback:function ($$v) {_vm.$set(_vm.tempForm, \"price_off\", $$v)},expression:\"tempForm.price_off\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品库存\",\"required\":\"\",\"prop\":\"inventory\"}},[_c('a-input',{model:{value:(_vm.tempForm.inventory),callback:function ($$v) {_vm.$set(_vm.tempForm, \"inventory\", $$v)},expression:\"tempForm.inventory\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"计量单位\",\"prop\":\"unit\",\"required\":\"\"}},[_c('a-input',{model:{value:(_vm.tempForm.unit),callback:function ($$v) {_vm.$set(_vm.tempForm, \"unit\", $$v)},expression:\"tempForm.unit\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品相册\",\"prop\":\"images\",\"required\":\"\"}},[_c('a-upload',{attrs:{\"action\":'https://mallapi.duyiedu.com/upload/images?appkey='+_vm.$store.state.login.user.appkey,\"name\":\"avatar\",\"list-type\":\"picture-card\",\"file-list\":_vm.fileList},on:{\"preview\":_vm.handlePreview,\"change\":_vm.handleChange}},[(_vm.fileList.length < 8)?_c('div',[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_c('div',{staticClass:\"ant-upload-text\"},[_vm._v(\" Upload \")])],1):_vm._e()]),_c('a-modal',{attrs:{\"visible\":_vm.previewVisible,\"footer\":null},on:{\"cancel\":_vm.handleCancel}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"alt\":\"example\",\"src\":_vm.previewImage}})])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"sale-info-container\">\r\n    <a-form-model ref=\"ruleForm\"\r\n                  :model=\"tempForm\"\r\n                  :rules=\"rules\"\r\n                  :label-col=\"labelCol\"\r\n                  :wrapper-col=\"wrapperCol\">\r\n      <a-form-model-item label=\"商品售价\"\r\n                         required\r\n                         prop=\"price\">\r\n        <a-input v-model=\"tempForm.price\" />\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"折扣价格\"\r\n                         prop=\"price_off\">\r\n        <a-input v-model=\"tempForm.price_off\" />\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"商品库存\"\r\n                         required\r\n                         prop=\"inventory\">\r\n        <a-input v-model=\"tempForm.inventory\" />\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"计量单位\"\r\n                         prop=\"unit\"\r\n                         required>\r\n        <a-input v-model=\"tempForm.unit\" />\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"商品相册\"\r\n                         prop=\"images\"\r\n                         required>\r\n        <a-upload :action=\"'https://mallapi.duyiedu.com/upload/images?appkey='+$store.state.login.user.appkey\"\r\n                  name=\"avatar\"\r\n                  list-type=\"picture-card\"\r\n                  :file-list=\"fileList\"\r\n                  @preview=\"handlePreview\"\r\n                  @change=\"handleChange\">\r\n          <div v-if=\"fileList.length < 8\">\r\n            <a-icon type=\"plus\" />\r\n            <div class=\"ant-upload-text\">\r\n              Upload\r\n            </div>\r\n          </div>\r\n        </a-upload>\r\n        <a-modal :visible=\"previewVisible\"\r\n                 :footer=\"null\"\r\n                 @cancel=\"handleCancel\">\r\n          <img alt=\"example\"\r\n               style=\"width: 100%\"\r\n               :src=\"previewImage\" />\r\n        </a-modal>\r\n      </a-form-model-item>\r\n\r\n    </a-form-model>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCategory } from '@/api/category';\r\n\r\nfunction getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = (error) => reject(error);\r\n  });\r\n}\r\n\r\nexport default {\r\n  props: ['tempForm'],\r\n  data() {\r\n    return {\r\n      labelCol: { span: 4 },\r\n      wrapperCol: { span: 14 },\r\n      // form: {},\r\n      categoryList: [], // 商品类目列表\r\n      categoryItems: [], // 商品子类目列表\r\n      size: 'default',\r\n      rules: {},\r\n      previewVisible: false,\r\n      previewImage: '',\r\n      fileList: [],\r\n    };\r\n  },\r\n  created() {\r\n    getCategory().then((r) => {\r\n      this.categoryList = r.data;\r\n    });\r\n    if (this.tempForm.images.length) {\r\n      this.fileList = this.tempForm.images.map((item, idx) => {\r\n        return {\r\n          uid: idx,\r\n          name: `image${idx}.png`,\r\n          status: 'done',\r\n          url: item,\r\n        };\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    onSubmit() {\r\n      this.$refs.ruleForm.validate((valid) => {\r\n        if (valid) {\r\n          alert('submit!');\r\n        } else {\r\n          console.log('error submit!!');\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    handleCancel() {\r\n      this.previewVisible = false;\r\n      console.log(333);\r\n    },\r\n    async handlePreview(file) {\r\n      if (!file.url && !file.preview) {\r\n        file.preview = await getBase64(file.originFileObj);\r\n      }\r\n      this.previewImage = file.url || file.preview;\r\n      this.previewVisible = true;\r\n    },\r\n    handleChange({ fileList }) {\r\n      // console.log(fileList);\r\n      this.fileList = fileList;\r\n      if (fileList.length && fileList[0].status === 'done') {\r\n        let res = [];\r\n        for (let i = 0; i < fileList.length; i++) {\r\n          if (fileList[i].response) {\r\n            res.push(fileList[i].response.data.url);\r\n          }\r\n        }\r\n        this.tempForm.images = [...res];\r\n      } else if (fileList.length === 0) {\r\n        this.tempForm.images = [];\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"less\" scoped>\r\n.ant-form {\r\n  margin-left: 10%;\r\n}\r\n\r\n.ant-upload-select-picture-card i {\r\n  font-size: 32px;\r\n  color: #999;\r\n}\r\n\r\n.ant-upload-select-picture-card .ant-upload-text {\r\n  margin-top: 8px;\r\n  color: #666;\r\n}\r\n\r\n.ant-form-explain {\r\n  display: none;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=abda6dea&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=abda6dea&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"abda6dea\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"product-add-container\">\r\n    <a-steps :current=\"current\">\r\n      <a-step v-for=\"item in steps\"\r\n              :key=\"item.title\"\r\n              :title=\"item.title\" />\r\n    </a-steps>\r\n    <div class=\"steps-content\">\r\n      <BasicInfo ref=\"ruleForm\"\r\n                 :tempForm=\"tempForm\"\r\n                 v-if=\"current===0\" />\r\n      <SaleInfo :tempForm=\"tempForm\"\r\n                v-if=\"current===1\" />\r\n    </div>\r\n    <div class=\"steps-action\">\r\n      <a-button v-if=\"current < steps.length - 1\"\r\n                type=\"primary\"\r\n                @click=\"next\">\r\n        下一步\r\n      </a-button>\r\n      <a-button class=\"pre\"\r\n                v-if=\"current > 0\"\r\n                style=\"margin-left: 8px\"\r\n                @click=\"prev\">\r\n        返回上一步\r\n      </a-button>\r\n      <a-button v-if=\"current == steps.length - 1\"\r\n                type=\"primary\"\r\n                @click=\"done\">\r\n        完成\r\n      </a-button>\r\n\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BasicInfo from '@/components/BasicInfo';\r\nimport SaleInfo from '@/components/SaleInfo';\r\nimport { addProduct, detailProduct, editProduct } from '@/api/product';\r\n\r\nexport default {\r\n  components: {\r\n    BasicInfo,\r\n    SaleInfo,\r\n  },\r\n  data() {\r\n    return {\r\n      current: 0,\r\n      tempForm: {\r\n        title: '',\r\n        desc: '',\r\n        category: '',\r\n        c_items: [],\r\n        tags: [],\r\n        price: 0,\r\n        price_off: 0,\r\n        inventory: 0,\r\n        unit: '',\r\n        images: [],\r\n      },\r\n      steps: [\r\n        {\r\n          title: '填写商品基本信息',\r\n        },\r\n        {\r\n          title: '填写商品销售信息',\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  created() {\r\n    const id = this.$route.params.id;\r\n    if (id) {\r\n      //  表示是编辑商品页面而不是新增商品页面\r\n      detailProduct(id).then((r) => {\r\n        this.tempForm = r;\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    next() {\r\n      if (\r\n        !this.tempForm.title ||\r\n        !this.tempForm.category ||\r\n        !this.tempForm.tags.length\r\n      ) {\r\n        return alert('必填项未填完整');\r\n      }\r\n      // this.tempForm = this.$refs.ruleForm.form; //给回填表单准备\r\n      this.current++;\r\n    },\r\n    prev() {\r\n      this.current--;\r\n    },\r\n    done() {\r\n      if (\r\n        !this.tempForm.price ||\r\n        !this.tempForm.inventory ||\r\n        !this.tempForm.unit ||\r\n        !this.tempForm.images.length\r\n      ) {\r\n        return alert('必填项未填完整');\r\n      }\r\n      // this.tempForm.images = [...new Set([...this.tempForm.images])];\r\n      console.log(this.$route.params);\r\n      if (this.$route.params.id) {\r\n        // 有id是编辑商品页面\r\n        editProduct(this.tempForm).then((r) => {\r\n          console.log(r);\r\n        });\r\n        this.$message.success('编辑商品成功');\r\n      } else {\r\n        // 没有id是新增商品\r\n        addProduct(this.tempForm).then((r) => {\r\n          console.log(r);\r\n        });\r\n        this.$message.success('新增商品成功');\r\n      }\r\n      this.$router.push({\r\n        name: 'ProductList',\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.product-add-container {\r\n  margin-top: 40px;\r\n  .ant-steps {\r\n    width: 75%;\r\n  }\r\n  .steps-content {\r\n    margin-top: 16px;\r\n    border: 1px dashed #e9e9e9;\r\n    border-radius: 6px;\r\n    background-color: #fafafa;\r\n    min-height: 200px;\r\n    text-align: center;\r\n    padding-top: 80px;\r\n  }\r\n\r\n  .steps-action {\r\n    margin-top: 24px;\r\n\r\n    .pre {\r\n      margin-right: 4px;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1d94f224&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1d94f224&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d94f224\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2e02f6a0&lang=less&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1d94f224&lang=less&scoped=true&\"","import request from \"./request\";\r\n\r\nexport async function getCategory(params) {\r\n  return await request.get(\"/category/all\", { params });\r\n}\r\n","import request from \"./request\";\r\n\r\nexport async function getProduct(params) {\r\n  // console.log(\"params:\", params);\r\n  return await request.get(\"/products/all\", { params });\r\n}\r\nexport async function DelProduct(params) {\r\n  return await request.delete(`/products/${params.id}`);\r\n}\r\nexport async function addProduct(params) {\r\n  return await request.post(\"/products/add\", params);\r\n}\r\nexport async function detailProduct(id) {\r\n  return await request.get(`/products/${id}`);\r\n}\r\nexport async function editProduct(params) {\r\n  return await request.put(`/products/edit`, params);\r\n}\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=abda6dea&lang=less&scoped=true&\""],"sourceRoot":""}